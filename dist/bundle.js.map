{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://web-assignment/webpack/bootstrap","webpack://web-assignment/webpack/runtime/make namespace object","webpack://web-assignment/./src/js/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","window.onload = function () {\r\n    // Debugging isLoggedIn variable\r\n    console.log(\"isLoggedIn:\", typeof isLoggedIn !== \"undefined\" ? isLoggedIn : \"Not defined\");\r\n\r\n    if (typeof isLoggedIn === \"undefined\") {\r\n        console.error(\"isLoggedIn is not defined\");\r\n        return;\r\n    }\r\n\r\n    // Debugging isAdmin variable\r\n    console.log(\"isAdmin:\", typeof isAdmin !== \"undefined\" ? isAdmin : \"Not defined\");\r\n\r\n    if (typeof isAdmin === \"undefined\") {\r\n        console.error(\"isAdmin is not defined\");\r\n        return;\r\n    }\r\n\r\n    // Debugging reCAPTCHA variable\r\n    console.log(\"recaptchaVerified:\", typeof recaptchaVerified !== \"undefined\" ? recaptchaVerified : \"Not defined\");\r\n\r\n    if (typeof recaptchaVerified === \"undefined\") {\r\n        console.error(\"recaptchaVerified is not defined\");\r\n        return;\r\n    }\r\n\r\n    // Debugging Session variable\r\n    console.log(\"Session:\", typeof Session !== \"undefined\" ? Session : \"Not defined\");\r\n\r\n    if (typeof Session === \"undefined\") {\r\n        console.error(\"Session is not defined\");\r\n        return;\r\n    }\r\n\r\n    // Debugging User_id variable\r\n    console.log(\"User_id:\", typeof User_id !== \"undefined\" ? User_id : \"Not defined\");\r\n\r\n    if (typeof User_id === \"undefined\") {\r\n        console.error(\"User_id is not defined\");\r\n        return;\r\n    }\r\n\r\n    const fadeElements = document.querySelectorAll('.fade-in');\r\n    fadeElements.forEach(element => {\r\n        element.classList.add('show');\r\n    });\r\n\r\n    // Get button and badge elements\r\n    const loginButton = document.getElementById('loginButton');\r\n    const libraryButton = document.getElementById('libraryButton');\r\n    const libraryBadge = document.getElementById('library_badge');\r\n    const cartButton = document.getElementById('cartButton');\r\n    const cartBadge = document.getElementById('cart_badge');\r\n    const sessionButton = document.getElementById('sessionButton');\r\n    const adminButton = document.getElementById('adminButton');\r\n\r\n    // Update UI based on login state\r\n    if (isLoggedIn) {\r\n        loginButton.innerHTML = \"My&nbsp;&nbsp;Account\";\r\n        loginButton.href = \"account.php\";\r\n        libraryButton.classList.remove(\"disabled\");\r\n        libraryButton.removeAttribute(\"aria-disabled\");\r\n        //libraryBadge?.removeAttribute('hidden'); \r\n        cartButton.classList.remove(\"disabled\");\r\n        cartButton.removeAttribute(\"aria-disabled\");\r\n        //cartBadge?.removeAttribute('hidden');\r\n        sessionButton?.removeAttribute('hidden');\r\n    } else {\r\n        loginButton.innerHTML = \"Login\";\r\n        loginButton.href = \"login.php\";\r\n        libraryButton.classList.add(\"disabled\");\r\n        libraryButton.setAttribute(\"aria-disabled\", \"true\");\r\n        libraryBadge?.setAttribute('hidden', 'hidden');\r\n        cartButton.classList.add(\"disabled\");\r\n        cartButton.setAttribute(\"aria-disabled\", \"true\");\r\n        cartBadge?.setAttribute('hidden', 'hidden');\r\n        sessionButton?.setAttribute('hidden', 'hidden');\r\n    }\r\n    if (isAdmin) {\r\n        adminButton?.removeAttribute('hidden');\r\n    }\r\n};\r\n\r\n//Update cart badge on header Function\r\nwindow.updateCartBadge = function () {\r\n    const cartItems = JSON.parse(localStorage.getItem('cartItems')) || []; // Retrieve cart items from localStorage\r\n    const cartCount = cartItems.length || 0; // Get the number of items in the cart\r\n\r\n    // Find the badge element in the Cart button\r\n    const cartBadge = document.querySelector('#cartButton .badge');\r\n    if (cartBadge) {\r\n        cartBadge.textContent = cartCount; // Update badge count\r\n        cartBadge.hidden = cartCount === 0; // Hide badge if count is 0\r\n    }\r\n}\r\n// Update library badge on header Function\r\nwindow.updateLibraryBadge = function () {\r\n    const libraryCount = JSON.parse(localStorage.getItem('libraryCount')) || 0; // Get count from localStorage\r\n    const libraryBadge = document.querySelector('#libraryButton .badge'); \r\n    // Find the badge element in the Library button\r\n    if (libraryBadge) {\r\n        libraryBadge.textContent = libraryCount; // Update badge count\r\n        libraryBadge.hidden = libraryCount === 0; // Hide badge if count is 0\r\n    }\r\n}\r\n\r\n// Show/Hide Password Function\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    // Select all password fields that start with \"password\" [id^='password']\r\n    document.querySelectorAll(\"input[type='password']\").forEach(passwordInput => {\r\n        const id = passwordInput.id; // Get the ID of the password input\r\n        const parent = passwordInput.parentElement; // Get the parent container\r\n        if (parent.querySelector(`#toggle${id}`)) return;\r\n\r\n        // Create the toggle icon dynamically\r\n        const toggleIcon = document.createElement(\"i\");\r\n        toggleIcon.classList.add(\"bi\", \"bi-eye-slash\", \"position-absolute\", \"top-50\", \"end-0\", \"translate-middle-y\", \"me-3\");\r\n        toggleIcon.style.cursor = \"pointer\";\r\n        toggleIcon.id = `toggle${id}`; // Assign a unique ID\r\n\r\n        // Ensure the parent has relative positioning\r\n        parent.classList.add(\"position-relative\");\r\n        // Append the icon inside the parent container\r\n        parent.appendChild(toggleIcon);\r\n\r\n        // Add event listener for toggling password visibility\r\n        toggleIcon.addEventListener(\"click\", () => {\r\n            if (passwordInput.type === \"password\") {\r\n                passwordInput.type = \"text\"; // Show password\r\n                toggleIcon.classList.replace(\"bi-eye-slash\", \"bi-eye-fill\");\r\n            } else {\r\n                passwordInput.type = \"password\"; // Hide password\r\n                toggleIcon.classList.replace(\"bi-eye-fill\", \"bi-eye-slash\");\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n// Convert timestamp or Date to 'YYYY-MM-DD HH:mm:ss' in Hong Kong time\r\nfunction formatHKDateTime(input) {\r\n    const date = input instanceof Date ? input : new Date(input);\r\n\r\n    // Force Hong Kong timezone conversion using Intl\r\n    const options = {\r\n        timeZone: 'Asia/Hong_Kong',\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit',\r\n        hour12: false,\r\n    };\r\n\r\n    const formatter = new Intl.DateTimeFormat('en-GB', options);\r\n    const parts = formatter.formatToParts(date).reduce((acc, part) => {\r\n        acc[part.type] = part.value;\r\n        return acc;\r\n    }, {});\r\n\r\n    return `${parts.year}-${parts.month}-${parts.day} ${parts.hour}:${parts.minute}:${parts.second}`;\r\n}\r\n\r\n// Call the function initially to ensure the badge is updated on page load\r\nupdateCartBadge();\r\nupdateLibraryBadge();\r\n// Save the current page URL before redirecting to the login page\r\nif (!localStorage.getItem(\"preLoginUrl\") && window.location.pathname.split(\"/\").pop() !== \"login.php\") localStorage.setItem(\"preLoginUrl\", window.location.href);\r\n\r\n// Sentry Debug\r\nSentry.onLoad(function () {\r\n    Sentry.init({\r\n        // Tracing\r\n        tracesSampleRate: 1.0, // Capture 100% of the transactions\r\n        // Session Replay\r\n        replaysSessionSampleRate: 0.5, // This sets the sample rate at 50%. You may want to change it to 100% while in development and then sample at a lower rate in production.\r\n        replaysOnErrorSampleRate: 1.0, // If you're not already sampling the entire session, change the sample rate to 100% when sampling sessions where errors occur.\r\n    });\r\n});\r\nSentry.replayIntegration({\r\n    unblock: [\".sentry-unblock, [data-sentry-unblock]\"],\r\n    unmask: [\".sentry-unmask, [data-sentry-unmask]\"],\r\n});\r\n//myUndefinedFunction();"],"names":["window","onload","console","log","isLoggedIn","error","isAdmin","recaptchaVerified","Session","User_id","fadeElements","document","querySelectorAll","forEach","element","classList","add","loginButton","getElementById","libraryButton","libraryBadge","cartButton","cartBadge","sessionButton","adminButton","innerHTML","href","remove","removeAttribute","setAttribute","updateCartBadge","cartItems","JSON","parse","localStorage","getItem","cartCount","length","querySelector","textContent","hidden","updateLibraryBadge","libraryCount","addEventListener","passwordInput","id","parent","parentElement","concat","toggleIcon","createElement","style","cursor","appendChild","type","replace","formatHKDateTime","input","date","Date","options","timeZone","year","month","day","hour","minute","second","hour12","formatter","Intl","DateTimeFormat","parts","formatToParts","reduce","acc","part","value","location","pathname","split","pop","setItem","Sentry","onLoad","init","tracesSampleRate","replaysSessionSampleRate","replaysOnErrorSampleRate","replayIntegration","unblock","unmask"],"sourceRoot":""}